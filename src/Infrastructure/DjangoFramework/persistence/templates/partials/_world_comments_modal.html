<!-- WORLD COMMENTS OVERLAY (Reels Style) -->
<div id="world-comments-overlay" class="hidden fixed inset-0 bg-black/80 z-[120] flex items-center justify-center p-4" onclick="toggleWorldComments()">
    <div class="w-full max-w-[500px] h-[70vh] max-h-[600px] bg-[#0f0f0f] rounded-2xl border border-gray-800 shadow-2xl flex flex-col overflow-hidden" onclick="event.stopPropagation()">
        
        <!-- Header -->
        <div class="px-4 py-3 border-b border-gray-800 flex justify-between items-center bg-[#0f0f0f]/95 backdrop-blur">
            <h3 class="font-bold text-white text-sm">Comentarios <span id="world-overlay-count" class="text-gray-500 font-normal ml-1">0</span></h3>
            <button onclick="toggleWorldComments()" class="p-2 text-white hover:bg-white/10 rounded-full transition">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>

        <!-- Comments List -->
        <div id="world-comments-list" class="flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent">
            <!-- Dynamic Content -->
        </div>

        <!-- Input -->
        <div class="p-3 border-t border-gray-800 bg-[#0f0f0f] flex items-center gap-2">
            {% if user.is_authenticated %}
                {% if user.profile.avatar %}
                    <img src="{{ user.profile.avatar.url }}" class="w-8 h-8 rounded-full bg-gray-800 object-cover shrink-0 border border-gray-700">
                {% else %}
                    <img src="https://ui-avatars.com/api/?name={{ user.username }}&background=random&color=fff" class="w-8 h-8 rounded-full bg-gray-800 object-cover shrink-0 border border-gray-700">
                {% endif %}
                <div class="flex-1 bg-[#272727] rounded-full flex items-center px-4 py-2">
                    <input type="text" id="world-comment-input" placeholder="Añade un comentario..." 
                        class="bg-transparent border-none text-white text-sm w-full focus:outline-none placeholder-gray-500"
                        oninput="document.getElementById('world-btn-send').disabled = this.value.trim() === ''"
                        onkeypress="if(event.key === 'Enter') postWorldComment()">
                </div>
                <button onclick="postWorldComment()" class="p-2 text-white hover:bg-white/10 rounded-full transition shrink-0" disabled id="world-btn-send">
                   <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="text-blue-500"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg> 
                </button>
            {% else %}
                <p class="text-gray-500 text-sm text-center w-full py-2">Inicia sesión para comentar</p>
            {% endif %}
        </div>
    </div>
</div>
