{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mapa Estructural</title>
    <style>
        body { background-color: #0a0a12; color: #e0e0e0; font-family: 'Segoe UI', sans-serif; padding: 40px; }
        .container { max-width: 900px; margin: 0 auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 15px; }
        h1 { margin: 0; color: #d633ff; text-transform: uppercase; letter-spacing: 2px; }
        .btn-back { background: #333; color: #fff; text-decoration: none; padding: 8px 20px; border-radius: 5px; border: 1px solid #444; }
        .btn-back:hover { background: #555; }
        .tree-container { background: #161625; border: 1px solid #2a2a40; border-radius: 10px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .node-row { display: flex; align-items: center; padding: 8px 10px; border-bottom: 1px solid #222; transition: background 0.2s; text-decoration: none; color: #ccc; }
        .node-row:hover { background: #1f1f33; color: #fff; }
        .node-row:last-child { border-bottom: none; }
        .connector { color: #444; margin-right: 10px; font-family: monospace; }
        .node-badge { font-family: 'Courier New', monospace; font-size: 0.8em; background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px; color: #666; margin-right: 10px; }
        .node-name { font-weight: bold; font-size: 1.1em; }
        .root-node .node-name { color: #d633ff; text-decoration: underline; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; margin-left: auto; }
        .st-LIVE { background: #2ecc71; box-shadow: 0 0 5px #2ecc71; }
        .st-DRAFT { background: #f39c12; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üó∫Ô∏è Estructura: {{ root_name }}</h1>
            <a href="javascript:history.back()" class="btn-back">‚¨Ö Volver</a>
        </div>
        <div class="tree-container">
            {% for item in tree %}
            <a href="{% url 'ver_mundo' item.public_id %}" class="node-row {% if item.is_root %}root-node{% endif %}">
                <div style="width: {{ item.indent_px }}px;"></div>
                {% if not item.is_root %}<span class="connector">‚îî‚îÄ</span>{% endif %}
                <span class="node-badge">{{ item.id_display }}</span>
                <span class="node-name">{{ item.name }}</span>
                <span class="status-dot st-{{ item.status }}" title="{{ item.status }}"></span>
            </a>
            {% empty %}
                <p style="text-align:center; color:#666;">Vac√≠o.</p>
            {% endfor %}
        </div>
    </div>
</body>
</html>