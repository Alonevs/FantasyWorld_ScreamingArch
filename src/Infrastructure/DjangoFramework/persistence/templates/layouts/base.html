{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ECLAI Universe{% endblock %}</title>
    
    <!-- Shared Tailwind Config -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: '#0a0a12',
                        card: '#161625',
                        accent: '#d633ff',
                        'accent-hover': '#b02ce0',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.6s ease-out forwards',
                    }
                }
            }
        }
    </script>

    <!-- Global Styles -->
    <style>
        body { 
            background-color: #0a0a12; 
            color: #eee; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        }
        /* Scrollbar personalizada */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0a0a12; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
    </style>
    {% block extra_head %}{% endblock %}
    <!-- Alpine.js -->
    <script src="//unpkg.com/alpinejs" defer></script>
</head>
<body class="bg-dark text-gray-300 min-h-screen">

    <!-- Toast Notifications -->
    {% if messages %}
    <div id="toast-container" class="fixed top-5 left-1/2 -translate-x-1/2 z-50 flex flex-col items-center gap-2 pointer-events-none">
        {% for message in messages %}
        <div class="px-4 py-2 rounded shadow-lg text-white font-bold backdrop-blur border border-white/20
            {% if message.tags == 'success' %}bg-green-600/90{% else %}bg-red-600/90{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    <script>setTimeout(() => { 
        const el = document.getElementById('toast-container');
        if(el) el.remove(); 
    }, 3000);</script>
    {% endif %}



    <!-- Main Content -->
    {% block content %}
    {% endblock %}

    <!-- Modals Area -->
    {% block modals %}
    {% endblock %}

    <!-- Global Scripts -->
    <script>
            // Card Slideshow Logic - OVERLAPPING WAVE (SMOOTH RIPPLE)
            const slideshows = document.querySelectorAll('.card-slideshow');
            if (slideshows.length > 0) {
                console.log('Initializing ' + slideshows.length + ' card slideshows with SMOOTH WAVE effect');
                
                // Stagger Time: 1000ms (1s)
                // Creates a clear wave. Transition is 3s, so Card A is 1s into transition when Card B starts.
                const staggerDelay = 1000;
                
                // Fixed Cycle: 25s
                // We ensure the interval is long enough to finish the wave if there are many cards.
                const userInterval = 25000; 
                const intervalDur = Math.max(userInterval, slideshows.length * staggerDelay + 2000); 
                
                console.log(`ðŸŒŠ Wave Config: Stagger ${staggerDelay}ms | Total Interval ${intervalDur}ms`);

                slideshows.forEach((container, index) => {
                    const images = container.querySelectorAll('.slide-img');
                    if (images.length < 2) return;
                    
                    let current = 0;
                    
                    // Initial Delay based on index
                    setTimeout(() => {
                        setInterval(() => {
                            // Fade out current
                            images[current].classList.remove('opacity-100');
                            images[current].classList.add('opacity-0');
                            
                            // Next index
                            current = (current + 1) % images.length;
                            
                            // Fade in next
                            images[current].classList.remove('opacity-0');
                            images[current].classList.add('opacity-100');
                        }, intervalDur);
                    }, index * staggerDelay);
                });
            }
        });
    </script>

</body>
</html>
