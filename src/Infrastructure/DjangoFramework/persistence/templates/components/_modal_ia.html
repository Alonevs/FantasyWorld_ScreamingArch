<div id="aiModal" class="fixed inset-0 bg-black/95 z-50 hidden items-center justify-center">
    <!-- Caos Card Container -->
    <!-- Caos Card Container -->
    <div class="caos-card caos-glow-purple w-full max-w-md relative p-0 overflow-hidden shadow-2xl">
        
        <div class="px-8 pb-8 pt-6 text-center">
            <h2 class="text-xl font-bold text-white mb-2 flex items-center justify-center gap-2">
                <span>ðŸ”®</span> Generador Neural: <span class="text-purple-400">AI Dreams</span>
            </h2>
            <p class="text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-6">Stable Diffusion xl + Llama 3</p>
            
            <div id="ai-step-1">
                <!-- Info Tip Box -->
                <div class="bg-purple-900/10 border border-purple-500/20 rounded-lg p-3 mb-5 flex gap-3 items-start text-left">
                    <span class="text-lg">ðŸ’¡</span>
                    <p class="text-xs text-purple-200/80 leading-relaxed font-medium">
                        La IA leerÃ¡ el contexto de tu mundo para generar una visualizaciÃ³n onÃ­rica Ãºnica.
                    </p>
                </div>

                <button onclick="generatePreview()" class="w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg shadow-lg shadow-purple-900/50 transition-all hover:scale-[1.02] active:scale-95 text-xs uppercase tracking-widest flex items-center justify-center gap-2 mb-3">
                    <span>âœ¨</span> Generar Ahora
                </button>
                <button onclick="closeAiModal()" class="text-gray-500 hover:text-white text-[10px] uppercase tracking-widest font-bold transition-colors">Cancelar</button>
            </div>

            <div id="ai-step-loading" class="hidden py-8">
                <div class="text-4xl animate-bounce mb-4 text-purple-400">ðŸ”®</div>
                <p class="text-purple-300 font-bold animate-pulse text-xs uppercase tracking-widest">SoÃ±ando pÃ­xeles...</p>
            </div>

            <div id="ai-step-result" class="hidden">
                <img id="ai-preview-img" class="w-full rounded-lg border border-gray-800 mb-5 shadow-2xl bg-black">
                
                <div class="text-left mb-5">
                    <label class="block text-[10px] text-gray-500 uppercase font-bold tracking-widest mb-1.5 ml-1">TÃ­tulo de la Obra</label>
                    <input type="text" id="ai-img-title" placeholder="Ej: Paisaje Desolado..." class="w-full bg-[#13151f] border border-gray-800 rounded-lg p-3 text-sm text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500/50 outline-none transition-all placeholder:text-gray-700 font-medium">
                </div>

                <div class="flex gap-3 pt-2">
                    <button onclick="discardAiImage()" class="flex-1 py-3 bg-[#0f111a] hover:bg-red-900/20 text-gray-400 hover:text-red-400 rounded-lg border border-gray-800 hover:border-red-900 transition-colors uppercase tracking-widest text-[10px] font-bold">Descartar</button>
                    <button onclick="saveAiImage()" class="flex-1 py-3 bg-green-600 hover:bg-green-500 text-white uppercase tracking-widest text-[10px] font-bold rounded-lg shadow-lg shadow-green-900/50 transition-all hover:scale-[1.02] active:scale-95 flex items-center justify-center gap-2">
                        <span>ðŸ’¾</span> Guardar
                    </button>
                </div>
            </div>
        </div>
</div>
